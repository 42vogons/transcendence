FROM node:latest

ARG FRONT_DOMAIN
ENV FRONT_DOMAIN=$FRONT_DOMAIN
ARG NEXT_PUBLIC_FRONT_DOMAIN
ENV NEXT_PUBLIC_FRONT_DOMAIN=$NEXT_PUBLIC_FRONT_DOMAIN

ARG BACK_HOST
ENV BACK_HOST=$BACK_HOST
ARG NEXT_PUBLIC_BACK_HOST
ENV NEXT_PUBLIC_BACK_HOST=$NEXT_PUBLIC_BACK_HOST

ARG CLIENT_ID
ENV CLIENT_ID=$CLIENT_ID

WORKDIR /srcs

COPY ./ ./

RUN npm install

RUN npm run build

EXPOSE 3000

ENTRYPOINT ["npm", "start"]